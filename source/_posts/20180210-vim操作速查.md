---
title: vim操作速查
date: 2018-02-10 17:35:16
tags: vim
---

# 普通模式

## 光标的移动与转跳

- 上下左右：
    - `h`：左移
    - `l`：右移
    - `j`：下移
    - `k`：上移


- 单词操作：
    - `w`：下一个单词的开头
    - `e`：当前单词的结尾
    - `b`：前一个单词的开头
    - `ge`：前一个单词的结尾


- 行操作：
    - `0`或`^`：当前行的行头
    - `$`：当前行的行尾
    - `nG`：移动到第n行
    - `gg`：移动到第一行
    - `G`：移动到最后一行


- 查找操作：
    - `f<字母>`：向后搜索<字母>并转跳到第一个匹配的位置
    - `F<字母>`：向前搜索<字母>并转跳到第一个匹配的位置

## 删除文本

- 字符操作：
    - `x`：删除游标所在的字符
    - `X`（同`Delete`）：删除游标所在前一个字符


- 单词操作：
    - `dw`：删除一个单词


- 行操作：
    - `dd`：删除整行
    - `d^`：删除至行首
    - `d$` 或 `D`：删除至行尾


- 文档操作：
    - `dG`：删除到文档结尾处
    - `d1G`：删除至文档首部

## 重复命令

- `.`(小数点)：重复上一次的命令操作
- `n <命令>`：执行n次命令

## 复制、剪切、粘贴

- 复制：
    - 单词操作：
        - `yw`：复制一个单词
        - `y2w`：复制两个单词
    - 行操作：
        - `yy`：复制游标所在的整行
        - `y^`：复制至行首
        - `y$`：复制至行尾
    - 文本操作：
        - `yG`：复制至文本末
        - `y1G`：复制至文本开头


- 剪切：
    - `dd`：删除命令


- 粘贴：
    - `p`（小写）：粘贴至光标后
    - `P`（大写）：粘贴至光标前

## 替换与撤销

- 字符操作：
    - `r+<待替换字母>`：将游标所在字母替换为制定字母
    - `R`：连续替换，直到按下Esc键
    - `~`：反转游标所在字母大小写


- 单词操作：
    - `cw`：替换一个单词，即删除一个单词，并进入插入模式


- 行操作：
    - `cc`：替换整行，即删除游标所在行，并进入插入模式
    - `C`（大写）：替换游标以后至行末


- 撤销：
    - `u{n}`：撤销一次或n次操作
    - `Ctrl+r`：redo，即侧小undo的操作

## 快速缩进

- `>>`：整行向右缩进
- `<<`：整行向左回退

## 查找

- `/`：向下查找字符串
- `?`：向上查找字符串


- 继续查找：
    - `n`：继续查找
    - `N`：反向查找


## 退出vim

- `Shift+zz`：保存退出k

# 多文件编辑

- `vim 1.txt 2.txt`：同时创建 1.txt，2.txt 这两个文件并且进行编辑。
- 命令行模式
    - `:n`：编辑 2.txt
    - `:N`：编辑 1.txt
    - `:e 3.txt`：打开新文件 3.txt
    - `:ls`：列出以前编辑过的文件
    - `:b 2.txt`：直接进入文件 2.txt 编辑
    - `:bd 2.txt`：删除以前编辑过的列表中的文件项目
    - `:e! 4.txt`：新打开文件 4.txt，放弃正在编辑的文件
    - `:f`：显示正在编辑的文件名
    - `:f new.txt`：改变正在编辑的文件名为 new.txt

# 插入模式

- 进入插入模式：
    - `i`：在当前光标处进行编辑
    - `I`：在行首插入
    - `a`：在光标后插入编辑
    - `A`：在行末插入
    - `o`：在当前行后插入一个新行
    - `O`：在当前行前插入一个新行
    - `cw`：替换从光标所在位置后到一个单词结尾的字符
- 返回普通模式：
    - `ESC`

# 可视模式

- 字符选择模式：
    普通模式下输入 `v` ，进入字符选择模式，移动光标，光标走过的地方就会选取。再次按下 `v` 后会取消选取。
- 行选择模式：
    普通模式下输入 `Shift+v`，按下 `Shift+v` 之后，会整行选取，移动光标可以选择更多的行。再次按下 `Shift+v` 后会取消选取。
- 区域选择模式：
    普通模式下输入 `Ctrl+v`
- 删除选取区域内容：
    输入 `d`
- 复制选取区域内容：
    输入 `y`

# 视窗操作

- 命令行模式下：
    - `:new`：打开一个新的 vim 视窗，并进入视窗编辑一个新文件
    - `:sp 1.txt`：打开新的垂直分屏视窗来编辑 1.txt
    - `:vsp 2.txt`：打开新的垂直分屏视窗来编辑 2.txt
- 普通模式下：
    - `Ctrl+w s`：将当前窗口分割成两个水平的窗口
    - `Ctrl+w v`：将当前窗口分割成两个垂直的窗口
    - `Ctrl+w q`：即 `:q` 结束分割出来的视窗。如果在新视窗中有输入，需要使用强制符！即 `:q!`
    - `Ctrl+w o`：打开一个视窗并隐藏之前的所有视窗
    - `Ctrl+w j`：移至下面视窗
    - `Ctrl+w k`：移至上面视窗
    - `Ctrl+w h`：移至左边视窗
    - `Ctrl+w l`：移至右边视窗
    - `Ctrl+w J`：将当前视窗移至下面
    - `Ctrl+w K`：将当前视窗移至上面
    - `Ctrl+w H`：将当前视窗移至左边
    - `Ctrl+w L`：将当前视窗移至右边
    - `Ctrl+w -`：减小视窗的高度
    - `Ctrl+w +`：增加窗口的高度
    
# 文档加密

`vim -x file1`，加密文档的时候，会要求输入两次密码，两次密码需要保持一致，
下一次用 vim 打开的时候，就会要求输入密码。

# 在vim执行外部命令

在命令行模式中输入!可以执行外部的shell命令

- `:!ls`：用于显示当前目录的内容
- `:!rm`：FILENAME用于删除名为 FILENAME 的文件
- `:w FILENAME`：可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件

# 帮助系统

vim中的查看帮助

- 普通模式下：
    - 按 F1 打开 vim 自己预设的帮助文档
- 命令行模式下
    - `:h shiftwidth`： 打开名为shiftwidth的帮助文件
    - `ver`：显示版本及参数

# 功能设定

## vim的功能设定

可以在编辑文件的时候进行功能设定，如命令行模式下输入:set nu（显示行数），设定值退出vim后不会保存。要永久保存配置需要修改vim配置文件。

vim的配置文件~/.vimrc，可以打开文件进行修改，不过务必小心不要影响vim正常使用

## 获取目前的设定

- 命令行模式：
    - `:set` (`:se`)：显示所有修改过的配置
    - `:set all`：显示所有的设定值
    - `:set option?`：显示option的设定值
    - `:set nooption`：取消当前设定值

## set功能的说明

- 命令行模式：
    - `:set autoindent(ai)`：设置自动缩进
    - `:set autowrite(aw)`：设置自动存档，默认未打开
    - `:set background=dark或light`：设置背景风格
    - `:set backup(bk)`：设置自动备份，默认未打开
    - `:set cindent(cin)`：设置C语言风格缩进
